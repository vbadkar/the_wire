!function(c,o,m){"use strict";var p="media",t="blazy-"+p,f=p+"--player",l=f+"--on",u=p+"__icon",h="."+u+"--play",v="iframe",y="is-playing",$="data-"+v+"-title",g="data-url";function e(a){var s,d,n,e=c(a),i=e.find(v),a=e.find(h),r=c(m);c.isElm(a)&&(s=c.attr(a,g),d=c.attr(a,$),c.remove(i),e.on("click."+t,h,function(a){if(a.preventDefault(),""===s)return!1;var e=this,i=e.parentNode,t=r.find("."+y),l=c.find(i,v),a=r.find("video");s=c.attr(e,g),d=c.attr(e,$),c.isElm(a)&&!a.paused&&a.pause(),c.isElm(t)&&(a=r.find("."+y+" "+v),c.remove(a),t.className=t.className.replace(/(\S+)playing/,"")),c.addClass(i,y),c.remove(l),n||((n=m.createElement(v)).className=p+"__iframe "+p+"__element",c(n).attr({src:s,allowfullscreen:!0,title:d})),i.appendChild(n)}),e.on("click."+t,".media__icon--close",function(a){a.preventDefault();var e=this.parentNode,a=c.find(e,v);e.className.match(y)&&(e.className=e.className.replace(/(\S+)playing/,"")),c.remove(a)}).addClass(l))}o.theme.blazyMedia=function(a){var e=a.el||a.element,i=c(e),t=i.find("img"),l=c.parse(i.attr("data-"+p)),s=c.isElm(t)?o.checkPlain(c.attr(t,"alt","Video preview",!0)):"",d=l.width?parseInt(l.width,10):640,n=l.height?parseInt(l.height,10):360,r=l?(n/d*100).toFixed(2):100,m=i.attr("data-box-url"),e=i.attr("href"),t=i.attr("data-oembed-url",e,!0),n=p+"__image "+p+"__element",i=a.imgClass?n+" "+a.imgClass:n,e=l.id?" media--"+l.id:"",n="video"===l.type?" "+f:"",l="";return m&&(l+='<img src="$img" class="$imgClass" alt="$alt" loading="lazy" decoding="async" />'),n&&(l+='<span class="$icon $icon--close"></span>',l+='<span class="$icon $icon--play" data-url="$oembed" data-iframe-title="$alt"></span>'),l='<div class="$md $idClass $md--switch $player $md--ratio $md--ratio--fluid" style="padding-bottom: $pad%">'+l+"</div>",a.unwrap||(l='<div class="$wrapper $wrapper--inline" style="width: $widthpx">'+l+"</div>"),c.template(l,{md:p,icon:u,idClass:e,player:n,pad:r,img:m,imgClass:i,alt:s,oembed:t,width:d,wrapper:p+"-wrapper"})},o.behaviors.blazyMedia={attach:function(a){a=c.context(a),c.once(e,".media--player:not(.media--player--on)",a)}}}(dBlazy,Drupal,this.document);
